---
title: Konfiguratu fakturen sortze automatikoa
description: Gai honek proformako fakturak automatikoki sortzeari eta konfiguratzeari buruzko informazioa eskaintzen du.
author: rumant
manager: Annbe
ms.date: 04/05/2021
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 359c5902e0b6a08ab7fc982095062e4d1816db6c
ms.sourcegitcommit: ca0fc078d1a12484eca193fe051b8442c0559db8
ms.translationtype: HT
ms.contentlocale: eu-ES
ms.lasthandoff: 04/07/2021
ms.locfileid: "5866766"
---
# <a name="set-up-automatic-invoice-creation"></a><span data-ttu-id="405cb-103">Konfiguratu fakturen sortze automatikoa</span><span class="sxs-lookup"><span data-stu-id="405cb-103">Set up automatic invoice creation</span></span> 
 
<span data-ttu-id="405cb-104">_**Honetarako aplikatzen da:** inplementazio arina - mahukatik proformako fakturaziora, Baliabideen / stockean oinarritutako eszenatokien Project Operations_</span><span class="sxs-lookup"><span data-stu-id="405cb-104">_**Applies To:** Lite deployment - deal to proforma invoicing, Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="405cb-105">Fakturen sortze automatikoa konfigura dezakezu Dynamics 365 Project Operations-en.</span><span class="sxs-lookup"><span data-stu-id="405cb-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="405cb-106">Sistemak proforma faktura zirriborro bat sortzen du proiektuaren kontratu eta kontratu lerro bakoitzaren faktura egutegian oinarrituta.</span><span class="sxs-lookup"><span data-stu-id="405cb-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="405cb-107">Fakturen ordutegiak kontratu lerro mailan konfiguratuta daude.</span><span class="sxs-lookup"><span data-stu-id="405cb-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="405cb-108">Kontratu bateko lerro bakoitzak faktura ordutegi desberdina izan dezake, edo faktura ordutegi bera kontratuaren lerro guztietan sar daiteke.</span><span class="sxs-lookup"><span data-stu-id="405cb-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="405cb-109">Faktura bat sortzen duzunean, sistemak gutxienez faktura bat sortzen du proiektuaren kontratu bakoitzeko.</span><span class="sxs-lookup"><span data-stu-id="405cb-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="405cb-110">Zenbait kasutan, hainbat faktura sor daitezke.</span><span class="sxs-lookup"><span data-stu-id="405cb-110">In some cases, there may be multiple invoices created.</span></span> <span data-ttu-id="405cb-111">Adibidez, kontratuak bezero anitz baditu, faktura kopuru bera sortuko da proiektuaren kontratu horretan fakturatzeko fakturagarriak diren eragiketak dituzten bezeroen kopurua.</span><span class="sxs-lookup"><span data-stu-id="405cb-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="405cb-112">Ulertu transakzioak nola sartzen diren faktura batean</span><span class="sxs-lookup"><span data-stu-id="405cb-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="405cb-113">Batzuetan, proiektuan oinarritutako kontratu lerro bakoitzak faktura ordutegi bereizi bat zehazten du.</span><span class="sxs-lookup"><span data-stu-id="405cb-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="405cb-114">Adibidez, Adatum kontratua gauzatzeko zerbitzuek kontratu lerro hauek dituzte:</span><span class="sxs-lookup"><span data-stu-id="405cb-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="405cb-115">Eskuz sortutako bi mugarri dituen prezio finkoa duen prototipo lana.</span><span class="sxs-lookup"><span data-stu-id="405cb-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="405cb-116">Denbora barne hartzen duen eta astelehenero bi astero fakturatuko den ezarpen lana.</span><span class="sxs-lookup"><span data-stu-id="405cb-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="405cb-117">Hilabeteko lehen astelehenean hilero fakturatu behar diren gastuak.</span><span class="sxs-lookup"><span data-stu-id="405cb-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="405cb-118">Bi lerro-elementu horietako bakoitzean zehaztutako fakturen ordutegiek honako taula itxura dute:</span><span class="sxs-lookup"><span data-stu-id="405cb-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="405cb-119">Kontratuaren lerroa</span><span class="sxs-lookup"><span data-stu-id="405cb-119">Contract line</span></span> | <span data-ttu-id="405cb-120">Fakturaren sorrera-data</span><span class="sxs-lookup"><span data-stu-id="405cb-120">Invoice run date</span></span> | <span data-ttu-id="405cb-121">Transakzioa erabilgarri dagoen azken eguna</span><span class="sxs-lookup"><span data-stu-id="405cb-121">Transaction cut-off date</span></span> | <span data-ttu-id="405cb-122">Mugarriaren data</span><span class="sxs-lookup"><span data-stu-id="405cb-122">Milestone date</span></span> | <span data-ttu-id="405cb-123">Mugarriaren zenbatekoa</span><span class="sxs-lookup"><span data-stu-id="405cb-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="405cb-124">Prototipoaren lana</span><span class="sxs-lookup"><span data-stu-id="405cb-124">Prototype work</span></span> | <span data-ttu-id="405cb-125">Urriak 5, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-125">October 5, Monday</span></span> | - | <span data-ttu-id="405cb-126">Urriak 5, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-126">October 5, Monday</span></span> | <span data-ttu-id="405cb-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="405cb-127">5000 USD</span></span> |
| - | <span data-ttu-id="405cb-128">Azaroak 3, asteartea</span><span class="sxs-lookup"><span data-stu-id="405cb-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="405cb-129">Azaroak 3, asteartea</span><span class="sxs-lookup"><span data-stu-id="405cb-129">November 3, Tuesday</span></span> | <span data-ttu-id="405cb-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="405cb-130">12,000 USD</span></span> |
| <span data-ttu-id="405cb-131">Inplementazio-lana</span><span class="sxs-lookup"><span data-stu-id="405cb-131">Implementation work</span></span> | <span data-ttu-id="405cb-132">Urriak 5, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-132">October 5, Monday</span></span> | <span data-ttu-id="405cb-133">Urriak 4, igandea</span><span class="sxs-lookup"><span data-stu-id="405cb-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="405cb-134">Urriak 19, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-134">October 19, Monday</span></span> | <span data-ttu-id="405cb-135">Urriak 18, igandea</span><span class="sxs-lookup"><span data-stu-id="405cb-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="405cb-136">Azaroak 2, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-136">November 2, Monday</span></span> | <span data-ttu-id="405cb-137">Azaroak 1, igandea</span><span class="sxs-lookup"><span data-stu-id="405cb-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="405cb-138">Azaroak 16, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-138">November 16, Monday</span></span> | <span data-ttu-id="405cb-139">Azaroak 15, igandea</span><span class="sxs-lookup"><span data-stu-id="405cb-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="405cb-140">Egindako gastuak</span><span class="sxs-lookup"><span data-stu-id="405cb-140">Expenses incurred</span></span> | <span data-ttu-id="405cb-141">Urriak 5, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-141">October 5, Monday</span></span> | <span data-ttu-id="405cb-142">Urriak 4, igandea</span><span class="sxs-lookup"><span data-stu-id="405cb-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="405cb-143">Azaroak 2, astelehena</span><span class="sxs-lookup"><span data-stu-id="405cb-143">November 2, Monday</span></span> | <span data-ttu-id="405cb-144">Azaroak 1, igandea</span><span class="sxs-lookup"><span data-stu-id="405cb-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="405cb-145">Fakturazio automatikoa martxan dagoenean adibide honetan:</span><span class="sxs-lookup"><span data-stu-id="405cb-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="405cb-146">**Urriaren 4a edo aurreko edozein data**: Ez da fakturarik sortu kontratu honengatik **Fakturen ordutegia** Kontratu-linea horietako bakoitzaren taulak ez du urriaren 4a, igandea deitzen, faktura exekutatzeko data gisa.</span><span class="sxs-lookup"><span data-stu-id="405cb-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="405cb-147">**Urriak 5, astelehena**: Faktura bat sortzen da honetarako:</span><span class="sxs-lookup"><span data-stu-id="405cb-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="405cb-148">Mugarria barne hartzen duen prototipo lana, gisa markatuta badago **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="405cb-149">Urriak 4, igandea, transakzioaren amaiera eguna baino lehen sortutako Denborazko transakzio guztiak biltzen dituen inplementazio lana, honela markatuta dagoena **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="405cb-150">Urriak 4, igandea, transakzioaren amaiera eguna baino lehen sortutako Gastuen transakzio guztiak biltzen dituen egindako gastuak, honela markatuta dagoena **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="405cb-151">**Urriaren 6an edo urriak 19 baino aurreko edozein data**: Ez da fakturarik sortu kontratu honengatik **Fakturen ordutegia** Kontratu-linea horietako bakoitzaren taulak ez du urriaren 6 edo urriaren 19 baino aurreko edozein data deitzen, faktura exekutatzeko data gisa.</span><span class="sxs-lookup"><span data-stu-id="405cb-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="405cb-152">**Urriak 19, astelehena**: Urriak 18, igandea, transakzioaren amaiera eguna baino lehen sortutako Denborazko transakzio guztiak biltzen dituen inplementazio lanaren faktura bat sortu da, honela markatuta dagoena **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="405cb-153">**Azaroak 2, astelehena**: Faktura bat sortzen da honetarako:</span><span class="sxs-lookup"><span data-stu-id="405cb-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="405cb-154">Azaroak 1, igandea, transakzioaren amaiera eguna baino lehen sortutako Denborazko transakzio guztiak biltzen dituen inplementazio lana, honela markatuta dagoena **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="405cb-155">Azaroak 1, igandea, transakzioaren amaiera eguna baino lehen sortutako Gastuen transakzio guztiak biltzen dituen egindako gastuak, honela markatuta dagoena **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="405cb-156">**Azaroak 3, asteartea**: Faktura bat sortzen da 12000 USD-en mugarria barne hartzen duen prototipo lanetarako, gisa markatuta badago **Fakturatzeko prest**.</span><span class="sxs-lookup"><span data-stu-id="405cb-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="405cb-157">Konfiguratu fakturatze automatikoa</span><span class="sxs-lookup"><span data-stu-id="405cb-157">Configure automatic invoicing</span></span>

<span data-ttu-id="405cb-158">Osatu urrats hauek exekutatutako faktura automatikoa konfiguratzeko.</span><span class="sxs-lookup"><span data-stu-id="405cb-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="405cb-159">**Project Operations** aukeran, joan **Ezarpenak** > **Aldizkako faktura konfiguratzea** aukerara.</span><span class="sxs-lookup"><span data-stu-id="405cb-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="405cb-160">Sortu lan-sorta eta eman izen hau: **Project Operations fakturak sortzea**.</span><span class="sxs-lookup"><span data-stu-id="405cb-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="405cb-161">Lan-sortaren izenak "sortu fakturak" hitzak izan behar ditu.</span><span class="sxs-lookup"><span data-stu-id="405cb-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="405cb-162">**Lan mota** eremuan, hautatu **Bat ere ez** aukera.</span><span class="sxs-lookup"><span data-stu-id="405cb-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="405cb-163">Lehenespenez, **Maiztasuna egunero** eta **Aktibatuta dago** eremuak ezarrita daude **Bai** aukerarekin.</span><span class="sxs-lookup"><span data-stu-id="405cb-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="405cb-164">Hautatu **Lan-fluxua exekutatu**.</span><span class="sxs-lookup"><span data-stu-id="405cb-164">Select **Run Workflow**.</span></span> <span data-ttu-id="405cb-165">**Begiratu erregistroa** elkarrizketa-koadroan, hiru lan-fluxu ikusiko dituzu:</span><span class="sxs-lookup"><span data-stu-id="405cb-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="405cb-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="405cb-166">ProcessRunCaller</span></span>
- <span data-ttu-id="405cb-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="405cb-167">ProcessRunner</span></span>
- <span data-ttu-id="405cb-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="405cb-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="405cb-169">Hautatu **ProcessRunCaller** eta gero hautatu **Gehitu**.</span><span class="sxs-lookup"><span data-stu-id="405cb-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="405cb-170">Berrespenaren hurrengo elkarrizketa-koadroan, hautatu **Ados**.</span><span class="sxs-lookup"><span data-stu-id="405cb-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="405cb-171">**Lo** lan-fluxuaren ondoren dator **Prozesua** lan-fluxua.</span><span class="sxs-lookup"><span data-stu-id="405cb-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="405cb-172">Aukeratu ere egin dezakezu **ProcessRunner** 5. urratsean.</span><span class="sxs-lookup"><span data-stu-id="405cb-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="405cb-173">Ondoren, hautatzen duzunean **Ados** aukera, **Prozesua** lan-fluxuaren ondoren dator **Lo** lan-fluxua.</span><span class="sxs-lookup"><span data-stu-id="405cb-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="405cb-174">**ProcessRunCaller** eta **ProcessRunner** lan-fluxuek fakturak sortzen dituzte.</span><span class="sxs-lookup"><span data-stu-id="405cb-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="405cb-175">**ProcessRunCaller** lan-fluxuak **ProcessRunner** lan-fluxuari deitzen dio.</span><span class="sxs-lookup"><span data-stu-id="405cb-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="405cb-176">**ProcessRunner** fakturak benetan sortzen dituen lan-fluxua da.</span><span class="sxs-lookup"><span data-stu-id="405cb-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="405cb-177">Fakturak sortu behar diren kontraturen lerro guztietatik igarotzen da lan-fluxua eta fakturak sortzen ditu lerro horietarako.</span><span class="sxs-lookup"><span data-stu-id="405cb-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="405cb-178">Fakturak eratu behar diren kontratuaren lerroak zehazteko, lanpostuak kontratuaren lerroen fakturazio datak aztertzen ditu.</span><span class="sxs-lookup"><span data-stu-id="405cb-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="405cb-179">Kontratu bakarreko kontratuaren lerroek fakturaren iraupen-data bera badute, transakzioak bi faktura-lerro dituen faktura batean elkartzen dira.</span><span class="sxs-lookup"><span data-stu-id="405cb-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="405cb-180">Fakturak sortzeko transakziorik ez badago, lanak faktura sortzea saltatzen du.</span><span class="sxs-lookup"><span data-stu-id="405cb-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="405cb-181">**ProcessRunner** exekutatzen amaitu denean, **ProcessRunCaller** lan-fluxuari deitzen dio, amaiera-ordua ematen du eta itxita dago.</span><span class="sxs-lookup"><span data-stu-id="405cb-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="405cb-182">**ProcessRunCaller** lan-fluxuak, ondoren, zehaztutako amaiera-ordutik 24 orduz iraungo duen tenporizadorea hasten du.</span><span class="sxs-lookup"><span data-stu-id="405cb-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="405cb-183">Tenporizadorearen amaieran, **ProcessRunCaller** lan-fluxua itxita dago.</span><span class="sxs-lookup"><span data-stu-id="405cb-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="405cb-184">Lan-sortaren prozesua lan errepikaria da.</span><span class="sxs-lookup"><span data-stu-id="405cb-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="405cb-185">Prozesu-sorta hau askotan exekutatzen bada, lanaren zenbait kasu sortzen dira eta akatsak sor daitezke.</span><span class="sxs-lookup"><span data-stu-id="405cb-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="405cb-186">Hori dela eta, prozesu-sorta behin bakarrik hasi beharko zenuke eta exekutatzen gelditzen bada bakarrik berrabiarazi beharko zenuke.</span><span class="sxs-lookup"><span data-stu-id="405cb-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="405cb-187">Project Operations-eko sortako fakturazioa fakturen egutegien arabera konfiguratutako proiektuen kontratu lerroetarako bakarrik exekutatzen da.</span><span class="sxs-lookup"><span data-stu-id="405cb-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="405cb-188">Prezio finkoko fakturazio metodoa duen kontratu-lerroak mugarriak konfiguratu behar ditu.</span><span class="sxs-lookup"><span data-stu-id="405cb-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="405cb-189">Ordua eta materiala fakturatzeko metodoa duen proiektu-kontratuen lerroak fakturen egitaraua finkatuko du.</span><span class="sxs-lookup"><span data-stu-id="405cb-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
